function render_jsmind_map(params) {
  const { graphCode } = params;
  const buttonHeight = 30;
  const htmlString = `<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>jsMind Map</title><link type="text/css" rel="stylesheet" href="https://unpkg.com/jsmind@0.8.6/style/jsmind.css" /><script type="text/javascript" src="https://unpkg.com/jsmind@0.8.6/es6/jsmind.js"></script><script type="text/javascript" src="https://unpkg.com/dom-to-image@2.6.0/dist/dom-to-image.min.js"></script><script type="text/javascript" src="https://unpkg.com/jsmind@0.8.6/es6/jsmind.screenshot.js"></script><style>html, body {margin: 0;padding: 0;height: 100%;}#jsmind_container {position: relative;height: calc(100vh - ${buttonHeight}px);overflow: auto;}.dropdown-container {position: absolute;top: 5px;left: 5px;display: inline-block;z-index: 100;}.dropdown-button {background-color: transparent;border: none;padding: 5px;cursor: pointer;border-radius: 4px;display: flex;align-items: center;}.dropdown-button:hover {background-color: rgba(200, 200, 200, 0.2);}.dropdown-button::after {content: "\\25BC";margin-left: 0px;font-size: 0.8em;color: #888;}.dropdown-menu {display: none;position: absolute;background-color: #fff;border: 1px solid #eee;border-radius: 4px;padding: 5px 0;min-width: 120px;z-index: 1;white-space: nowrap;box-shadow: 0 2px 5px rgba(0,0,0,0.1);}.dropdown-menu.show {display: block;}.dropdown-menu a {display: block;padding: 8px 15px;text-decoration: none;color: #333;}.dropdown-menu a:hover {background-color: #f0f0f0;}</style></head><body><div class="dropdown-container"><button class="dropdown-button"></button><div class="dropdown-menu"><a href="#" id="download-image-link">Save as PNG</a></div></div><div id="jsmind_container"></div><script>try {${graphCode}const dropdownContainer = document.querySelector('.dropdown-container');const dropdownButton = document.querySelector('.dropdown-button');const dropdownMenu = document.querySelector('.dropdown-menu');dropdownButton.addEventListener('click', (event) => {event.stopPropagation();dropdownMenu.classList.toggle('show');});document.addEventListener('click', (event) => {if (!dropdownContainer.contains(event.target)) {dropdownMenu.classList.remove('show');}});const downloadLink = document.getElementById('download-image-link');downloadLink.addEventListener('click', (event) => {event.preventDefault();const dataUrl = jm.shoot();var link = document.createElement('a');link.href = dataUrl;link.download = 'mindmap.png';document.body.appendChild(link);link.click();document.body.removeChild(link);});} catch (error) {console.error("Error rendering mind map:", error);document.getElementById('jsmind_container').innerHTML = "<p>Error rendering mind map: " + error.message + ". Please check your input data and graph syntax.</p>";}</script></body></html>`;
  return htmlString;
}
